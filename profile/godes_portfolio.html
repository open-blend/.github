<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Godes — Parallax Portfolio + Forum</title>
  <meta name="description" content="Modern parallax portfolio with geometric wireframes and a fully local forum (IndexedDB)." />
  <style>
    /* =====================
       THEME — Dark Neon Pro
       ===================== */
    :root{
      --bg:#0B0F1A;          /* background */
      --surface:#0F172A;     /* surfaces */
      --elevated:#111827;    /* elevated card */
      --text:#E5E7EB;        /* primary text */
      --subtle:#94A3B8;      /* secondary text */
      --primary:#7C3AED;     /* violet */
      --secondary:#06B6D4;   /* cyan */
      --grad:linear-gradient(120deg,#A78BFA 0%,#06B6D4 100%);
      --hero:linear-gradient(135deg,#0B0F1A 0%, #0F172A 40%, #111827 100%);
      --ring:0 0 0 2px rgba(124,58,237,.35);
      --radius:16px;
      --shadow-soft:0 12px 30px rgba(0,0,0,.35);
      --shadow-glow:0 0 40px rgba(124,58,237,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text); background:var(--hero); font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; -webkit-font-smoothing:antialiased;}
    a{color:inherit; text-decoration:none}
    .container{max-width:1120px; margin:0 auto; padding:0 24px}

    /* Scrollbar */
    *{scrollbar-width:thin; scrollbar-color: var(--primary) var(--surface)}
    *::-webkit-scrollbar{width:10px;height:10px}
    *::-webkit-scrollbar-track{background:var(--surface)}
    *::-webkit-scrollbar-thumb{background:var(--primary); border-radius:6px}

    /* Nav */
    .nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(10px); background:color-mix(in srgb, var(--bg) 65%, transparent); border-bottom:1px solid rgba(255,255,255,.06)}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{display:flex; gap:12px; align-items:center; font-weight:600; letter-spacing:.3px}
    .brand-badge{width:32px;height:32px;border-radius:10px; background:conic-gradient(from 0deg at 50% 50%, #A78BFA, #06B6D4, #A78BFA); box-shadow:var(--shadow-glow)}
    .nav ul{display:flex; gap:8px; list-style:none; padding:0; margin:0}
    .nav a{padding:8px 12px; border-radius:10px; color:var(--subtle)}
    .nav a.active, .nav a:hover{background:rgba(255,255,255,.05); color:#fff}

    /* Hero + Parallax */
    .hero{position:relative; height:80vh; overflow:hidden}
    .hero .fg{position:relative; z-index:10; height:100%; display:grid; place-items:center; text-align:center;}
    .h1{font-size:clamp(36px,6vw,64px); line-height:1.05; font-weight:800; letter-spacing:-0.02em}
    .grad{background:var(--grad); -webkit-background-clip:text; background-clip:text; color:transparent}
    .lede{margin-top:14px; color:var(--subtle); font-size:18px}
    .btns{margin-top:24px; display:flex; gap:12px; justify-content:center}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 16px; border-radius:12px; font-weight:600; transition:transform .15s ease, background .2s ease, color .2s ease}
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:color-mix(in srgb, var(--primary) 90%, #000); color:#fff; box-shadow:var(--shadow-glow)}
    .btn-primary:hover{background:var(--primary)}
    .btn-ghost{border:1px solid rgba(255,255,255,.1); background:transparent; color:var(--text)}
    .btn-ghost:hover{background:rgba(255,255,255,.06)}

    /* Parallax layers */
    .layer{position:absolute; will-change:transform; pointer-events:none}
    .l-slow{opacity:.7}
    .l-mid{opacity:.8}
    .l-fast{opacity:.6}

    /* Sections */
    section{padding:80px 0}
    h2{font-size:clamp(28px,4vw,40px); margin:0 0 20px; font-weight:700}
    .h2-grad{background:var(--grad); -webkit-background-clip:text; background-clip:text; color:transparent}
    .card{background:color-mix(in srgb, var(--surface) 70%, transparent); border:1px solid rgba(255,255,255,.06); border-radius:20px; box-shadow:var(--shadow-soft); backdrop-filter:blur(8px)}

    /* Project grid */
    .grid{display:grid; gap:20px}
    @media(min-width:640px){.grid.cols-2{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:960px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .project{position:relative; overflow:hidden; padding:20px}
    .project:hover{transform:translateY(-4px); transition:transform .2s ease}
    .wf-grid{position:absolute; inset:0; opacity:.35}
    .tags{display:flex; gap:8px; flex-wrap:wrap}
    .tag{font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.05); color:var(--subtle)}

    /* Forum */
    .muted{color:var(--subtle)}
    .stack{display:grid; gap:14px}
    .input, .textarea, .file{width:100%; border-radius:12px; border:1px solid rgba(255,255,255,.1); background:var(--elevated); color:var(--text); padding:10px 12px; outline:none}
    .input:focus, .textarea:focus, .file:focus{box-shadow:var(--ring)}
    .textarea{min-height:96px; resize:vertical}
    .row{display:flex; align-items:center; gap:12px}
    .posts{display:grid; gap:14px}
    .post{padding:18px}
    .post h3{margin:0 0 6px}
    .tiny{font-size:12px}
    .actions{display:flex; flex-wrap:wrap; gap:8px}
    .btn-sm{padding:6px 10px; border-radius:10px; font-size:13px}

    /* Footer */
    footer{margin-top:80px; padding:26px 0; border-top:1px solid rgba(255,255,255,.06); color:var(--subtle); font-size:14px}
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav">
    <div class="container nav-inner">
      <div class="brand"><div class="brand-badge"></div><span>Godes</span></div>
      <nav>
        <ul>
          <li><a class="navlink" href="#home">Home</a></li>
          <li><a class="navlink" href="#projects">Projects</a></li>
          <li><a class="navlink" href="#forum">Forum</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- HERO / PARALLAX -->
  <section id="home" class="hero">
    <!-- Decorative background glow -->
    <div class="layer" style="inset:0; background:radial-gradient(60% 60% at 50% 40%, rgba(124,58,237,.20), transparent 70%)"></div>

    <!-- Slow layer: wireframe spheres -->
    <div class="layer l-slow" data-depth="0.15" style="left:-80px; top:70px">
      <svg width="460" height="460" viewBox="0 0 200 200" fill="none">
        <defs>
          <radialGradient id="wf" cx="50%" cy="50%">
            <stop offset="0%" stop-color="#A78BFA"/>
            <stop offset="100%" stop-color="#06B6D4"/>
          </radialGradient>
        </defs>
        <g opacity=".9">
          <circle cx="100" cy="100" r="98" stroke="url(#wf)" opacity=".15"/>
          <circle cx="100" cy="100" r="78" stroke="url(#wf)" opacity=".12"/>
          <circle cx="100" cy="100" r="58" stroke="url(#wf)" opacity=".10"/>
        </g>
        <g opacity=".15">
          <!-- Lat/long lines -->
          <path d="M0 100 H200" stroke="#94A3B8"/>
          <path d="M100 0 V200" stroke="#94A3B8"/>
          <path d="M20 60 L180 140" stroke="#94A3B8"/>
          <path d="M20 140 L180 60" stroke="#94A3B8"/>
        </g>
      </svg>
    </div>

    <!-- Mid layer: rotating wireframe cube -->
    <div class="layer l-mid" data-depth="0.30" style="right:48px; top:120px">
      <svg id="cube" width="300" height="300" viewBox="0 0 200 200" fill="none" stroke="#94A3B8" stroke-opacity=".35">
        <rect x="30" y="30" width="140" height="140"/>
        <rect x="50" y="50" width="100" height="100"/>
        <rect x="70" y="70" width="60" height="60"/>
      </svg>
    </div>

    <!-- Fast layer: diagonal streaks -->
    <div class="layer l-fast" data-depth="0.45" style="left:50%; transform:translateX(-50%); bottom:-36px">
      <svg width="820" height="240" viewBox="0 0 760 220" fill="none">
        <g stroke="#7C3AED" stroke-opacity=".14">
          <script type="application/json" id="_genLines">{"count":28}</script>
        </g>
      </svg>
    </div>

    <!-- Foreground content -->
    <div class="fg container">
      <div>
        <h1 class="h1">Building <span class="grad">delightfully engineered</span> experiences</h1>
        <p class="lede">Modern UI, precision motion, and a forum for sharing projects and downloads.</p>
        <div class="btns">
          <a class="btn btn-primary" href="#projects">View Projects</a>
          <a class="btn btn-ghost" href="#forum">Visit Forum</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about">
    <div class="container">
      <h2 class="h2-grad">About</h2>
      <p class="muted">I craft performant, animated interfaces and systems that feel satisfying to use. Clean architecture, consistent color, and micro‑interactions that carry meaning.</p>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects">
    <div class="container">
      <h2 class="h2-grad">Highlighted Projects</h2>
      <div class="grid cols-1 cols-2 cols-3">
        <article class="card project">
          <svg class="wf-grid" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(148,163,184,.15)" stroke-width=".5"/></pattern></defs>
            <rect width="100%" height="100%" fill="url(#grid)"/>
          </svg>
          <h3>Motion Grid</h3>
          <p class="muted">A lightweight motion system for grid UIs with physics‑styled transitions.</p>
          <div class="tags"><span class="tag">Vanilla JS</span><span class="tag">CSS</span><span class="tag">Animations</span></div>
        </article>
        <article class="card project">
          <svg class="wf-grid" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs><pattern id="grid2" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(148,163,184,.15)" stroke-width=".5"/></pattern></defs>
            <rect width="100%" height="100%" fill="url(#grid2)"/>
          </svg>
          <h3>Wireframe Engine</h3>
          <p class="muted">Procedural SVG wireframes and parallax layers for hero sections.</p>
          <div class="tags"><span class="tag">SVG</span><span class="tag">Parallax</span><span class="tag">Design System</span></div>
        </article>
        <article class="card project">
          <svg class="wf-grid" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs><pattern id="grid3" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(148,163,184,.15)" stroke-width=".5"/></pattern></defs>
            <rect width="100%" height="100%" fill="url(#grid3)"/>
          </svg>
          <h3>Forum Kit</h3>
          <p class="muted">A minimal forum experience with uploads and downloads, styled to match the site.</p>
          <div class="tags"><span class="tag">IndexedDB</span><span class="tag">Blobs</span><span class="tag">No backend</span></div>
        </article>
      </div>
    </div>
  </section>

  <!-- FORUM (Local, IndexedDB) -->
  <section id="forum">
    <div class="container">
      <h2 class="h2-grad">Forum</h2>
      <p class="muted">Share your projects (<b>ZIP, RAR, 7Z, TAR.GZ</b>). Add a title and summary; others can download. This single‑file demo stores posts locally using IndexedDB. You can export/import or flip a switch to talk to a backend later.</p>

      <div class="card" style="padding:18px">
        <form id="postForm" class="stack" autocomplete="off">
          <label class="tiny muted">Title</label>
          <input class="input" id="title" required placeholder="Project title" />

          <label class="tiny muted">Summary</label>
          <textarea class="textarea" id="summary" placeholder="Short description"></textarea>

          <div class="row">
            <div style="flex:1">
              <label class="tiny muted">Archive File (.zip/.rar/.7z/.tar/.gz/.tar.gz)</label>
              <input class="file" id="file" type="file" required />
            </div>
            <button class="btn btn-primary" id="submitBtn" type="submit">Post</button>
          </div>

          <div class="row">
            <button class="btn btn-ghost btn-sm" type="button" id="exportBtn">Export Forum (.json)</button>
            <label class="btn btn-ghost btn-sm" for="importFile">Import Forum (.json)</label>
            <input type="file" id="importFile" accept="application/json" hidden />
          </div>

          <p class="tiny muted">Max suggested size ~200MB (browser dependent). Filenames are stored as‑is; content lives in IndexedDB as Blobs. For production with multi‑user features, connect a backend (see code comment: BACKEND MODE).</p>
        </form>
      </div>

      <div style="height:16px"></div>
      <div class="posts" id="posts"></div>
    </div>
  </section>

  <footer>
    <div class="container row" style="justify-content:space-between">
      <div>© <span id="year"></span> Godes. All rights reserved.</div>
      <div>Built with vanilla HTML/CSS/JS — single file.</div>
    </div>
  </footer>

  <script>
    // ==========================
    // UTIL — helpers and perf
    // ==========================
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

    // Active nav link highlighting
    const navLinks = $$('.nav .navlink');
    const setActive = () => {
      const pos = window.scrollY + 80;
      for(const a of navLinks){
        const id = a.getAttribute('href');
        if(!id || !id.startsWith('#')) continue;
        const sec = $(id);
        if(!sec) continue;
        const top = sec.offsetTop, bottom = top + sec.offsetHeight;
        a.classList.toggle('active', pos>=top && pos<bottom);
      }
    };
    document.addEventListener('scroll', setActive, {passive:true});
    window.addEventListener('load', setActive);

    // Year in footer
    $('#year').textContent = new Date().getFullYear();

    // ==========================
    // PARALLAX + ANIMATIONS
    // ==========================
    // Generate diagonal lines procedurally for the fast layer
    (function genLines(){
      const g = document.currentScript?.previousElementSibling || document.getElementById('_genLines')?.parentElement;
      const cfgTag = document.getElementById('_genLines');
      if(!g || !cfgTag) return;
      const {count}=JSON.parse(cfgTag.textContent||'{"count":24}');
      for(let i=0;i<count;i++){
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1',(-40 + i*30).toString());
        line.setAttribute('y1','0');
        line.setAttribute('x2',(80 + i*30).toString());
        line.setAttribute('y2','220');
        g.appendChild(line);
      }
    })();

    // Slow cube rotation
    (function rotateCube(){
      const cube = document.getElementById('cube');
      let angle = 0;
      function tick(){ angle = (angle + 0.15) % 360; cube.style.transform = `rotate(${angle}deg)`; requestAnimationFrame(tick); }
      if(cube) requestAnimationFrame(tick);
    })();

    // Parallax on scroll — each .layer uses data-depth multiplier
    (function parallax(){
      const layers = $$('.layer');
      let lastY = window.scrollY;
      function onScroll(){
        const y = window.scrollY;
        if(Math.abs(y - lastY) < 1) return; // tiny throttle
        lastY = y;
        const hero = document.getElementById('home');
        const rect = hero.getBoundingClientRect();
        const progress = Math.min(1, Math.max(0, -rect.top / Math.max(1, rect.height)));
        for(const el of layers){
          const d = parseFloat(el.getAttribute('data-depth')||'0.2');
          const off = -progress * d * 700; // tune depth
          el.style.transform = `translate3d(0, ${off}px, 0)`;
        }
      }
      document.addEventListener('scroll', onScroll, {passive:true});
      window.addEventListener('load', onScroll);
      window.addEventListener('resize', onScroll);
    })();

    // ==========================
    // FORUM — IndexedDB storage
    // ==========================
    // Schema: posts {id, title, summary, fileName, size, createdAt, blob}
    const DB_NAME = 'godes_forum_v1';
    const STORE = 'posts';

    function openDB(){
      return new Promise((resolve, reject)=>{
        const req = indexedDB.open(DB_NAME, 1);
        req.onupgradeneeded = () => {
          const db = req.result;
          if(!db.objectStoreNames.contains(STORE)){
            const os = db.createObjectStore(STORE, {keyPath:'id', autoIncrement:true});
            os.createIndex('createdAt','createdAt');
          }
        };
        req.onerror = () => reject(req.error);
        req.onsuccess = () => resolve(req.result);
      });
    }

    async function dbAdd(post){
      const db = await openDB();
      return new Promise((resolve, reject)=>{
        const tx = db.transaction(STORE, 'readwrite');
        tx.objectStore(STORE).add(post).onsuccess = e => resolve(e.target.result);
        tx.onerror = () => reject(tx.error);
      });
    }
    async function dbAll(){
      const db = await openDB();
      return new Promise((resolve, reject)=>{
        const tx = db.transaction(STORE, 'readonly');
        const req = tx.objectStore(STORE).getAll();
        req.onsuccess = () => resolve(req.result.sort((a,b)=>b.id-a.id));
        req.onerror = () => reject(req.error);
      });
    }
    async function dbGet(id){
      const db = await openDB();
      return new Promise((resolve, reject)=>{
        const tx = db.transaction(STORE, 'readonly');
        const req = tx.objectStore(STORE).get(id);
        req.onsuccess = () => resolve(req.result);
        req.onerror = () => reject(req.error);
      });
    }
    async function dbDel(id){
      const db = await openDB();
      return new Promise((resolve, reject)=>{
        const tx = db.transaction(STORE, 'readwrite');
        const req = tx.objectStore(STORE).delete(id);
        req.onsuccess = () => resolve();
        req.onerror = () => reject(req.error);
      });
    }

    // Render posts
    const postsEl = document.getElementById('posts');
    async function renderPosts(){
      const posts = await dbAll();
      postsEl.innerHTML = '';
      if(!posts.length){
        const empty = document.createElement('div');
        empty.className = 'muted tiny';
        empty.textContent = 'No posts yet — share something!';
        postsEl.appendChild(empty);
        return;
      }
      for(const p of posts){
        const card = document.createElement('article');
        card.className = 'card post';
        card.innerHTML = `
          <div style="display:flex; gap:16px; justify-content:space-between; align-items:flex-start; flex-wrap:wrap">
            <div style="min-width:240px; max-width:680px">
              <h3>${escapeHTML(p.title)}</h3>
              <p class="muted" style="margin:.3rem 0 0">${escapeHTML(p.summary||'')}</p>
              <p class="tiny muted" style="margin:.4rem 0 0">${new Date(p.createdAt).toLocaleString()} • ${(p.size/(1024*1024)).toFixed(2)} MB</p>
            </div>
            <div class="actions">
              <a class="btn btn-ghost btn-sm" href="#" data-dl="${p.id}">Download: ${escapeHTML(p.fileName)}</a>
              <button class="btn btn-ghost btn-sm" data-del="${p.id}">Delete</button>
            </div>
          </div>`;
        postsEl.appendChild(card);
      }
    }

    function escapeHTML(s){
      return (s||'').replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
    }

    // Download handler (Blob -> Object URL)
    postsEl.addEventListener('click', async (e)=>{
      const a = e.target.closest('[data-dl]');
      const d = e.target.closest('[data-del]');
      if(a){
        e.preventDefault();
        const id = +a.getAttribute('data-dl');
        const post = await dbGet(id);
        if(!post){ alert('Not found.'); return; }
        const url = URL.createObjectURL(post.blob);
        const link = document.createElement('a');
        link.href = url; link.download = post.fileName; document.body.appendChild(link); link.click(); link.remove();
        setTimeout(()=>URL.revokeObjectURL(url), 1000);
      }
      if(d){
        e.preventDefault();
        const id = +d.getAttribute('data-del');
        if(confirm('Delete this post?')){ await dbDel(id); renderPosts(); }
      }
    });

    // Form submit — LOCAL mode by default
    const form = document.getElementById('postForm');
    const submitBtn = document.getElementById('submitBtn');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const title = document.getElementById('title').value.trim();
      const summary = document.getElementById('summary').value.trim();
      const file = document.getElementById('file').files[0];
      if(!title || !file) return;

      // Enforce archive-ish extension (basic client check)
      const ok = /\.(zip|rar|7z|tar|gz|tar\.gz)$/i.test(file.name);
      if(!ok){ alert('Unsupported archive type.'); return; }

      submitBtn.disabled = true; submitBtn.textContent = 'Uploading…';
      try{
        const buf = await file.arrayBuffer();
        const blob = new Blob([buf], {type:file.type || 'application/octet-stream'});
        await dbAdd({title, summary, fileName:file.name, size:file.size, createdAt:Date.now(), blob});
        form.reset();
        renderPosts();
      }catch(err){
        console.error(err); alert('Failed to save post locally.');
      }finally{
        submitBtn.disabled = false; submitBtn.textContent = 'Post';
      }
    });

    // Export / Import
    document.getElementById('exportBtn').addEventListener('click', async ()=>{
      const posts = await dbAll();
      // Strip blobs (convert to base64) for portable export
      const items = await Promise.all(posts.map(async p=>({
        id: p.id, title:p.title, summary:p.summary, fileName:p.fileName, size:p.size, createdAt:p.createdAt,
        blobB64: await blobToB64(p.blob)
      })));
      const json = new Blob([JSON.stringify({version:1, items}, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(json);
      const a = document.createElement('a');
      a.href = url; a.download = 'godes_forum_export.json'; document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 1000);
    });
    document.getElementById('importFile').addEventListener('change', async (e)=>{
      const f = e.target.files?.[0];
      if(!f) return;
      try{
        const text = await f.text();
        const data = JSON.parse(text);
        if(!data || !Array.isArray(data.items)) throw new Error('Invalid export file');
        for(const it of data.items){
          const blob = b64ToBlob(it.blobB64);
          await dbAdd({title:it.title, summary:it.summary, fileName:it.fileName, size:it.size, createdAt:it.createdAt, blob});
        }
        renderPosts();
      }catch(err){ alert('Failed to import'); }
      e.target.value = '';
    });

    function blobToB64(blob){
      return new Promise(res=>{ const r = new FileReader(); r.onload=()=>res((r.result||'').toString().split(',')[1]||''); r.readAsDataURL(blob); });
    }
    function b64ToBlob(b64){
      const bin = atob(b64); const len = bin.length; const arr = new Uint8Array(len);
      for(let i=0;i<len;i++) arr[i] = bin.charCodeAt(i);
      return new Blob([arr]);
    }

    // ==========================
    // BACKEND MODE (optional)
    // ==========================
    // To switch to a real server later, set BACKEND_MODE=true and define API_BASE.
    // POST /api/posts (multipart: file, title, summary)
    // GET  /api/posts  -> list
    // GET  /files/:id  -> download
    const BACKEND_MODE = false; // <- flip to true when wiring server
    const API_BASE = location.origin; // change if API on a different origin
    // NOTE: In this single-file demo we're running LOCAL IndexedDB only.

    // Initial render
    renderPosts();
  </script>
</body>
</html>
